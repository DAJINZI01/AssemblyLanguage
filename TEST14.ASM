; 编程，以“年/月/日 时:分:秒”的格式，显示当前的日期、时间。 

ASSUME CS:CODE, DS:DATA

DATA SEGMENT
	TIME_ADDR	DB 09H, 08H, 07H, 04H, 02H, 00H
	; TIME		DW 6 DUP (0)
	TIME_TABLE	DB 00H, 00H, '/', 00H, 00H, '/', 00H, 00H, ' ', 00H, 00H, ':', 00H, 00H, ':', 00H, 00H, 0
DATA ENDS

CODE SEGMENT
	START:
	MOV AX, DATA
	MOV DS, AX

	TIME_SHOW_S:
	MOV SI, OFFSET TIME_ADDR
	MOV DI, OFFSET TIME_TABLE

	MOV CX, 0006H
	TIME_S:
	MOV AL, [SI]
	OUT 70H, AL
	IN AL, 71H
	MOV AH, AL
	PUSH CX
	MOV CL, 04H
	SHR AH, CL
	AND AL, 0FH
	ADD AH, 30H
	ADD AL, 30H
	MOV [DI], AH
	MOV [DI].01H, AL
	INC SI 
	ADD DI, 0003H
	POP CX
	LOOP TIME_S

	MOV DX, 0C1FH
	MOV CL, 03H
	MOV SI, OFFSET TIME_TABLE
	CALL SHOW_STR 
	JMP TIME_SHOW_S
	
	MOV AX, 4C00H
	INT 21H

	SHOW_STR:
	PUSH AX
	PUSH CX
	PUSH DX
	PUSH SI
	PUSH DI
	PUSH ES
	
	MOV AX, 0B800H
	MOV ES, AX
	MOV AL, 0A0H
	MUL DH
	MOV DI, AX
	MOV AL, 02H
	MUL DL
	ADD DI, AX

	SHOW_STR_S:
	MOV AL, [SI]
	CMP AL, 00H
	JZ ZERO
	MOV ES:[DI], AL
	MOV ES:[DI].01H, CL
	INC SI
	ADD DI, 0002H
	JMP SHORT SHOW_STR_S

	ZERO:
	POP ES
	POP DI
	POP SI
	POP DX
	POP CX
	POP AX
	RET

CODE ENDS
	END START
