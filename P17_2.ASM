; 编程，接收永和的键盘输入，
; 输入“r”，将屏幕上的字符设置为红色
; 输入“g”，将屏幕上的字符设置为绿色
; 输入“b”，将屏幕上的字符设置为蓝色

ASSUME CS:CODE

CODE SEGMENT
	START:
	; 测试
	MOV AH, 00H
	INT 16H
	
	MOV CL, 01H
	CMP AL, 'r'
	JZ RED
	CMP AL, 'g'
	JZ GREEN
	CMP AL, 'b'
	JZ BLUE
	JMP SHORT MAIN_RET

	RED:
	SHL CL, 01H
	GREEN:
	SHL CL, 01H
	BLUE:	
	CALL SET_FOREGROUND_COLOR	

	MAIN_RET:
	MOV AX, 4C00H
	INT 21H

	SET_FOREGROUND_COLOR:
	PUSH AX
	PUSH BX
	PUSH CX
	PUSH ES
	
	MOV AX, 0B800H
	MOV ES, AX
	MOV BX, 0000H
	MOV AL, CL
	MOV CX, 07D0H
	SET_FOREGROUND_COLOR_S:
	AND BYTE PTR ES:[BX].01H, 0F8H
	OR ES:[BX].01H, AL
	ADD BX, 0002H
	LOOP SET_FOREGROUND_COLOR_S

	POP ES
	POP CX
	POP BX
	POP AX
	RET
	
CODE ENDS
	END START
